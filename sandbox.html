<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Demo: Gra Sandbox</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: #87CEEB;
      overflow: hidden;
    }
    canvas {
      display: block;
      background-color: #bdecb6;
    }
    .bubble {
      position: absolute;
      background: white;
      border-radius: 10px;
      padding: 4px 8px;
      box-shadow: 0 0 4px rgba(0,0,0,0.3);
      font-size: 14px;
      pointer-events: none;
    }
  </style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="bubble" class="bubble" style="display: none;">Cześć!</div>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let timeOfDay = 0; // 0 = dzień, 1 = noc
let bubble = document.getElementById('bubble');

const animals = [
  {x: 100, y: 300, text: 'Miau, jestem kotem!'},
  {x: 300, y: 250, text: 'Jestem drzewem, które mówi!'},
  {x: 500, y: 320, text: 'Uważaj, idzie burza!'},
  {x: 700, y: 260, text: 'CHCĘ KABANOSA!', shape: 'bird'},
  {x: 200, y: 350, text: 'KOCHAM WAS WSZYSTKICH!', shape: 'heart'}
];

function drawSky() {
  ctx.fillStyle = timeOfDay === 0 ? '#87CEEB' : '#1a1a40';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
}

function drawGround() {
  ctx.fillStyle = '#228B22';
  ctx.fillRect(0, canvas.height - 100, canvas.width, 100);
}

function drawGrass() {
  ctx.fillStyle = '#2e8b57';
  for (let i = 0; i < canvas.width; i += 20) {
    ctx.beginPath();
    ctx.moveTo(i, canvas.height - 100);
    ctx.lineTo(i + 5, canvas.height - 110);
    ctx.lineTo(i + 10, canvas.height - 100);
    ctx.fill();
  }
}

function drawBird(bird) {
  ctx.fillStyle = 'pink';
  ctx.beginPath();
  ctx.arc(bird.x, bird.y, 20, 0, Math.PI * 2);
  ctx.fill();

  ctx.beginPath();
  ctx.moveTo(bird.x - 20, bird.y);
  ctx.lineTo(bird.x - 35, bird.y - 10);
  ctx.lineTo(bird.x - 20, bird.y + 10);
  ctx.fill();

  ctx.beginPath();
  ctx.moveTo(bird.x + 20, bird.y);
  ctx.lineTo(bird.x + 35, bird.y - 10);
  ctx.lineTo(bird.x + 20, bird.y + 10);
  ctx.fill();

  ctx.fillStyle = 'orange';
  ctx.beginPath();
  ctx.moveTo(bird.x + 20, bird.y);
  ctx.lineTo(bird.x + 30, bird.y - 5);
  ctx.lineTo(bird.x + 30, bird.y + 5);
  ctx.fill();
}

function drawHeart(heart) {
  ctx.fillStyle = 'purple';
  ctx.beginPath();
  ctx.moveTo(heart.x, heart.y + 10);
  ctx.bezierCurveTo(heart.x - 25, heart.y - 20, heart.x - 25, heart.y + 20, heart.x, heart.y + 30);
  ctx.bezierCurveTo(heart.x + 25, heart.y + 20, heart.x + 25, heart.y - 20, heart.x, heart.y + 10);
  ctx.fill();

  ctx.fillStyle = 'white';
  ctx.font = '16px sans-serif';
  ctx.textAlign = 'center';
  ctx.fillText('☺', heart.x, heart.y + 12);
}

function drawAnimals() {
  animals.forEach(animal => {
    if (animal.shape === 'bird') {
      drawBird(animal);
    } else if (animal.shape === 'heart') {
      drawHeart(animal);
    } else {
      ctx.fillStyle = 'brown';
      ctx.beginPath();
      ctx.arc(animal.x, animal.y, 30, 0, Math.PI * 2);
      ctx.fill();

      ctx.strokeStyle = 'black';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(animal.x - 15, animal.y + 30);
      ctx.lineTo(animal.x - 15, animal.y + 40);
      ctx.moveTo(animal.x + 15, animal.y + 30);
      ctx.lineTo(animal.x + 15, animal.y + 40);
      ctx.stroke();

      ctx.fillStyle = 'green';
      ctx.beginPath();
      ctx.ellipse(animal.x - 10, animal.y - 30, 5, 10, 0, 0, Math.PI * 2);
      ctx.fill();
      ctx.beginPath();
      ctx.ellipse(animal.x + 10, animal.y - 30, 5, 10, 0, 0, Math.PI * 2);
      ctx.fill();
    }
  });
}

function checkClick(x, y) {
  for (let animal of animals) {
    let dx = x - animal.x;
    let dy = y - animal.y;
    if (Math.sqrt(dx * dx + dy * dy) < 30) {
      bubble.style.left = (animal.x - 40) + 'px';
      bubble.style.top = (animal.y - 60) + 'px';
      bubble.innerText = animal.text;
      bubble.style.display = 'block';
      setTimeout(() => bubble.style.display = 'none', 3000);
      return;
    }
  }
}

canvas.addEventListener('click', e => {
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  checkClick(x, y);
});

function gameLoop() {
  drawSky();
  drawGround();
  drawGrass();
  drawAnimals();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
